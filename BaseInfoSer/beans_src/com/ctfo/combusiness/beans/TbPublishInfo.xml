<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="TbPublishInfo">
	<typeAlias type="com.ctfo.local.obj.DynamicSqlParameter"
		alias="dynamicSqlParameter" />
	<resultMap id="TbPublishInfo" class="com.ctfo.combusiness.beans.TbPublishInfo">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, 
			do not modify. This element was generated on Thu Oct 13 15:08:04 CST 2011. -->
		<result column="INFO_ID" property="infoId" jdbcType="VARCHAR" />
		<result column="INFO_TYPE" property="infoType" jdbcType="VARCHAR" />
		<result column="INFO_THEME" property="infoTheme" jdbcType="VARCHAR" />
		<result column="INFO_STATUS" property="infoStatus" jdbcType="VARCHAR" />
		<result column="PUBLISH_USER" property="publishUser" jdbcType="VARCHAR" />
		<result column="PUBLISH_TIME" property="publishTime" jdbcType="DECIMAL" />
		<result column="ACCESSORY_FLAG" property="accessoryFlag"
			jdbcType="DECIMAL" />
		<result column="ENT_ID" property="entId" jdbcType="VARCHAR" />
		<result column="IS_SETTOP" property="isSettop" jdbcType="DECIMAL" />
		<result column="CREATE_BY" property="createBy" jdbcType="VARCHAR" />
		<result column="CREATE_TIME" property="createTime" jdbcType="DECIMAL" />
		<result column="UPDATE_BY" property="updateBy" jdbcType="VARCHAR" />
		<result column="UPDATE_TIME" property="updateTime" jdbcType="DECIMAL" />
		<result column="ENABLE_FLAG" property="enableFlag" jdbcType="VARCHAR" />
		<result column="ENDDATE" property="enddate" jdbcType="DECIMAL" />
		<result column="INFO_CONTENT" property="infoContent" jdbcType="CLOB" />

	</resultMap>

	<resultMap id="TbPublishInfoPage" class="com.ctfo.combusiness.beans.TbPublishInfo">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, 
			do not modify. This element was generated on Thu Oct 13 15:08:04 CST 2011. -->
		<result column="INFO_ID" property="infoId" jdbcType="DECIMAL" />
		<result column="INFO_TYPE" property="infoType" jdbcType="VARCHAR" />
		<result column="INFO_THEME" property="infoTheme" jdbcType="VARCHAR" />
		<result column="INFO_STATUS" property="infoStatus" jdbcType="VARCHAR" />
		<result column="PUBLISH_USER" property="publishUser" jdbcType="DECIMAL" />
		<result column="PUBLISH_TIME" property="publishTime" jdbcType="DECIMAL" />
		<result column="ACCESSORY_FLAG" property="accessoryFlag"
			jdbcType="DECIMAL" />
		<result column="ENT_ID" property="entId" jdbcType="DECIMAL" />
		<result column="IS_SETTOP" property="isSettop" jdbcType="DECIMAL" />
		<result column="CREATE_BY" property="createBy" jdbcType="DECIMAL" />
		<result column="CREATE_TIME" property="createTime" jdbcType="DECIMAL" />
		<result column="UPDATE_BY" property="updateBy" jdbcType="DECIMAL" />
		<result column="UPDATE_TIME" property="updateTime" jdbcType="DECIMAL" />
		<result column="ENABLE_FLAG" property="enableFlag" jdbcType="VARCHAR" />
		<result column="ENDDATE" property="enddate" jdbcType="DECIMAL" />
	</resultMap>

	<sql id="columns">
		INFO_ID,INFO_TYPE,INFO_THEME,INFO_STATUS,PUBLISH_USER,PUBLISH_TIME,ACCESSORY_FLAG,ENT_ID,IS_SETTOP,CREATE_BY,CREATE_TIME,UPDATE_BY,UPDATE_TIME,ENABLE_FLAG,ENDDATE,INFO_CONTENT
	</sql>

	<sql id="columns_page">
		INFO_ID,INFO_TYPE,INFO_THEME,INFO_STATUS,PUBLISH_USER,PUBLISH_TIME,ACCESSORY_FLAG,ENT_ID,IS_SETTOP,CREATE_BY,CREATE_TIME,UPDATE_BY,UPDATE_TIME,ENABLE_FLAG,ENDDATE
	</sql>


	<sql id="table">
		TB_PUBLISH_INFO
	</sql>
	<sql id="set">
		<dynamic prepend="set">
			INFO_ID = #infoId:VARCHAR#
			,INFO_TYPE = #infoType:VARCHAR#
			,INFO_THEME = #infoTheme:VARCHAR#
			,INFO_STATUS = #infoStatus:VARCHAR#
			,PUBLISH_USER = #publishUser:VARCHAR#
			,PUBLISH_TIME = #publishTime:DECIMAL#
			,ACCESSORY_FLAG = #accessoryFlag:DECIMAL#
			,ENT_ID = #entId:VARCHAR#
			,IS_SETTOP = #isSettop:DECIMAL#
			,CREATE_BY = #createBy:VARCHAR#
			,CREATE_TIME = #createTime:DECIMAL#
			,UPDATE_BY = #updateBy:VARCHAR#
			,UPDATE_TIME = #updateTime:DECIMAL#
			,ENABLE_FLAG = #enableFlag:VARCHAR#
			,ENDDATE = #enddate:DECIMAL#
			,INFO_CONTENT = #infoContent:CLOB#
		</dynamic>
	</sql>
	<sql id="setParam">
		<dynamic prepend="set">
			<isNotNull prepend="," property="updateValue.infoId">
				INFO_ID = #updateValue.infoId:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="updateValue.infoType">
				INFO_TYPE = #updateValue.infoType:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="updateValue.infoTheme">
				INFO_THEME = #updateValue.infoTheme:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="updateValue.infoStatus">
				INFO_STATUS = #updateValue.infoStatus:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="updateValue.publishUser">
				PUBLISH_USER = #updateValue.publishUser:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="updateValue.publishTime">
				PUBLISH_TIME = #updateValue.publishTime:DECIMAL#
			</isNotNull>
			<isNotNull prepend="," property="updateValue.accessoryFlag">
				ACCESSORY_FLAG = #updateValue.accessoryFlag:DECIMAL#
			</isNotNull>
			<isNotNull prepend="," property="updateValue.entId">
				ENT_ID = #updateValue.entId:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="updateValue.isSettop">
				IS_SETTOP = #updateValue.isSettop:DECIMAL#
			</isNotNull>
			<isNotNull prepend="," property="updateValue.createBy">
				CREATE_BY = #updateValue.createBy:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="updateValue.createTime">
				CREATE_TIME = #updateValue.createTime:DECIMAL#
			</isNotNull>
			<isNotNull prepend="," property="updateValue.updateBy">
				UPDATE_BY = #updateValue.updateBy:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="updateValue.updateTime">
				UPDATE_TIME = #updateValue.updateTime:DECIMAL#
			</isNotNull>
			<isNotNull prepend="," property="updateValue.enableFlag">
				ENABLE_FLAG = #updateValue.enableFlag:VARCHAR#
			</isNotNull>
			<isNotNull prepend="," property="updateValue.enddate">
				ENDDATE = #updateValue.enddate:DECIMAL#
			</isNotNull>
			<isNotNull prepend="," property="updateValue.infoContent">
				INFO_CONTENT = #updateValue.infoContent:CLOB#
			</isNotNull>
		</dynamic>
	</sql>
	<sql id="equal_WHERE">
		<isNotNull prepend="AND" property="equal.infoId">
			INFO_ID = #equal.infoId:VARCHAR#
		</isNotNull>
		<isNotNull prepend="AND" property="equal.infoType">
			INFO_TYPE = #equal.infoType:VARCHAR#
		</isNotNull>
		<isNotNull prepend="AND" property="equal.infoTheme">
			INFO_THEME = #equal.infoTheme:VARCHAR#
		</isNotNull>
		<isNotNull prepend="AND" property="equal.infoStatus">
			INFO_STATUS = #equal.infoStatus:VARCHAR#
		</isNotNull>
		<isNotNull prepend="AND" property="equal.publishUser">
			PUBLISH_USER = #equal.publishUser:VARCHAR#
		</isNotNull>
		<isNotNull prepend="AND" property="equal.publishTime">
			PUBLISH_TIME = #equal.publishTime:DECIMAL#
		</isNotNull>
		<isNotNull prepend="AND" property="equal.accessoryFlag">
			ACCESSORY_FLAG = #equal.accessoryFlag:DECIMAL#
		</isNotNull>
		<isNotNull prepend="AND" property="equal.entId">
			ENT_ID = #equal.entId:VARCHAR#
		</isNotNull>
		<isNotNull prepend="AND" property="equal.isSettop">
			IS_SETTOP = #equal.isSettop:DECIMAL#
		</isNotNull>
		<isNotNull prepend="AND" property="equal.createBy">
			CREATE_BY = #equal.createBy:VARCHAR#
		</isNotNull>
		<isNotNull prepend="AND" property="equal.createTime">
			CREATE_TIME = #equal.createTime:DECIMAL#
		</isNotNull>
		<isNotNull prepend="AND" property="equal.updateBy">
			UPDATE_BY = #equal.updateBy:VARCHAR#
		</isNotNull>
		<isNotNull prepend="AND" property="equal.updateTime">
			UPDATE_TIME = #equal.updateTime:DECIMAL#
		</isNotNull>
		<isNotNull prepend="AND" property="equal.enableFlag">
			ENABLE_FLAG = #equal.enableFlag:VARCHAR#
		</isNotNull>
		<isNotNull prepend="AND" property="equal.enddate">
			ENDDATE = #equal.enddate:DECIMAL#
		</isNotNull>
		<isNotNull prepend="AND" property="equal.infoContent">
			INFO_CONTENT = #equal.infoContent:CLOB#
		</isNotNull>
		<isNotNull prepend="AND" property="equal.sysRequest">
			INFO_TYPE in($equal.sysRequest$)
		</isNotNull>
	</sql>
	<sql id="like_WHERE">
		<isNotNull prepend="AND" property="like.infoType">
			INFO_TYPE like '%' || #like.infoType:VARCHAR# || '%'
		</isNotNull>
		<isNotNull prepend="AND" property="like.infoTheme">
			INFO_THEME like '%' || #like.infoTheme:VARCHAR# || '%'
		</isNotNull>
		<isNotNull prepend="AND" property="like.infoStatus">
			INFO_STATUS like '%' || #like.infoStatus:VARCHAR# || '%'
		</isNotNull>
		<isNotNull prepend="AND" property="like.enableFlag">
			ENABLE_FLAG like '%' || #like.enableFlag:VARCHAR# || '%'
		</isNotNull>
	</sql>
	<sql id="no_equal_WHERE">
		<isNotEmpty prepend="AND" property="noId">
			COMBO_ID !=#noId:VARCHAR#
		</isNotEmpty>
	</sql>
	<sql id="order">
		ORDER BY UPDATE_TIME DESC
	</sql>

	<sql id="order_page">
		ORDER BY IS_SETTOP DESC,PUBLISH_TIME DESC
	</sql>
	<sql id="where_param">
		<include refid="where" />
		<include refid="equal_WHERE" />
		<include refid="no_equal_WHERE" />
		<include refid="like_WHERE" />
		<include refid="order" />
	</sql>
	<sql id="equal_WHERE_page">
		<isNotNull prepend="AND" property="equal.infoType">
			INFO_TYPE = #equal.infoType:VARCHAR#
		</isNotNull>
		<isNotNull prepend="AND" property="equal.infoStatus">
			INFO_STATUS = #equal.infoStatus:VARCHAR#
		</isNotNull>
		<isNotNull prepend="AND" property="equal.entId">
			ENT_ID = #equal.entId:VARCHAR#
		</isNotNull>
	</sql>

	<sql id="no_equal_WHERE_page">
		<isNotEmpty prepend="AND" property="equal.enddate">
			ENDDATE > #equal.enddate:DECIMAL#
		</isNotEmpty>
		<isNotNull prepend="AND" property="equal.enableFlag">
			ENABLE_FLAG = #equal.enableFlag:VARCHAR#
		</isNotNull>
	</sql>

	<sql id="infoType_in_where">
		<isNotNull property="inMap.infoType">
          <![CDATA[  and INFO_TYPE in ]]>
			<iterate property="inMap.infoType" conjunction="," open="("
				close=")">
				#inMap.infoType[]:VARCHAR#
			</iterate>
		</isNotNull>
	</sql>

	<sql id="where_param_page">
		<include refid="where" />
		<include refid="equal_WHERE_page"></include>
		<include refid="no_equal_WHERE_page"></include>
		<include refid="infoType_in_where" />
		<include refid="order_page" />
	</sql>

	<sql id="where">
		WHERE ENABLE_FLAG !='0' AND ENABLE_FLAG != '-1'
	</sql>

	<sql id="where_param_id">
		<include refid="where" />
		<include refid="equal_WHERE" />
	</sql>

	<insert id="insert" parameterClass="com.ctfo.combusiness.beans.TbPublishInfo">
		<selectKey resultClass="Long" keyProperty="infoId">
			SELECT SEQ_ID.NEXTVAL AS VALUE FROM DUAL
		</selectKey>
		insert into TB_PUBLISH_INFO (INFO_ID, INFO_TYPE, INFO_THEME,
		INFO_STATUS, PUBLISH_USER,
		PUBLISH_TIME, ACCESSORY_FLAG, ENT_ID, IS_SETTOP, CREATE_BY, CREATE_TIME, UPDATE_BY,
		UPDATE_TIME, ENABLE_FLAG, ENDDATE, INFO_CONTENT)
		values (#infoId:VARCHAR#, #infoType:VARCHAR#, #infoTheme:VARCHAR#,
		#infoStatus:VARCHAR#,
		#publishUser:VARCHAR#, #publishTime:DECIMAL#, #accessoryFlag:DECIMAL#, #entId:VARCHAR#,
		#isSettop:DECIMAL#, #createBy:VARCHAR#, #createTime:DECIMAL#,
		#updateBy:VARCHAR#,
		#updateTime:DECIMAL#, #enableFlag:VARCHAR#, #enddate:DECIMAL#, #infoContent:CLOB#)
	</insert>
	<delete id="delete" parameterClass="Long">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, 
			do not modify. This element was generated on Thu Oct 13 15:08:04 CST 2011. -->
		delete from
		<include refid="table" />
	</delete>
	<update id="update" parameterClass="com.ctfo.combusiness.beans.TbPublishInfo">
		update
		<include refid="table" />
		<include refid="set" />
		<include refid="where" />
		and INFO_ID= #infoId:VARCHAR#
	</update>
	<update id="updateParam" parameterClass="dynamicSqlParameter">
		update
		<include refid="table" />
		<include refid="setParam" />
		<include refid="where" />
		<include refid="equal_WHERE" />
	</update>
	<select id="select" resultMap="TbPublishInfo">
		select
		<include refid="columns" />
		from
		<include refid="table" />
		<include refid="where" />
	</select>
	<select id="count" resultClass="int">
		SELECT COUNT(1) FROM
		<include refid="table" />
	</select>
	<select id="selectParam" resultMap="TbPublishInfo"
		parameterClass="dynamicSqlParameter">
		select
		<include refid="columns" />
		from
		<include refid="table" />
		<include refid="where_param" />
	</select>
	<select id="countParam" resultClass="int" parameterClass="dynamicSqlParameter">
		SELECT COUNT(1) FROM
		<include refid="table" />
		<include refid="where_param" />
	</select>
	<select id="selectPk" parameterClass="com.ctfo.combusiness.beans.TbPublishInfo"
		resultMap="TbPublishInfo">
		select
		<include refid="columns" />
		from
		<include refid="table" />
	</select>
	<select id="selectPageForParam" parameterClass="dynamicSqlParameter"
		resultMap="TbPublishInfo">
		select
		<include refid="columns" />
		FROM (SELECT BB.*,ROWNUM r FROM (SELECT * FROM
		<include refid="table" />
		<include refid="where_param" />
		) BB
		<dynamic prepend="WHERE">
			<isGreaterEqual prepend="" property="endNum"
				compareValue="0">
        <![CDATA[  ROWNUM <= #endNum#  ]]>
			</isGreaterEqual>
		</dynamic>
		) tt
		<dynamic prepend="WHERE">
			<isGreaterEqual prepend="AND" property="startNum"
				compareValue="0">
        <![CDATA[  tt.r > #startNum# ]]>
			</isGreaterEqual>
		</dynamic>
	</select>
	<select id="selectPublishInfoByParam" parameterClass="dynamicSqlParameter"
		resultMap="TbPublishInfo">
		select
		<include refid="columns" />
		from (select
		<include refid="columns" />
		from
		<include refid="table" />
   <![CDATA[
   where ENDDATE >#equal.enddate:DECIMAL# 
   ]]>
		<include refid="infoType_in_where" />
   <![CDATA[
   and INFO_STATUS= '1' and ENABLE_FLAG ='1' 
   ORDER BY IS_SETTOP desc,PUBLISH_TIME desc) tt
   where ROWNUM <= #rows#
   ]]>
	</select>

	<select id="selectPublishInfoByParamNoNumber" parameterClass="dynamicSqlParameter"
		resultMap="TbPublishInfo">
		select
		<include refid="columns" />
		from (select
		<include refid="columns" />
		from
		<include refid="table" />
   <![CDATA[
   where ENDDATE >#equal.enddate:DECIMAL# 
   ]]>
		<include refid="infoType_in_where" />
   <![CDATA[
   and INFO_STATUS= '1' and ENABLE_FLAG ='1' 
   ORDER BY IS_SETTOP desc,PUBLISH_TIME desc) tt
   ]]>
	</select>

	<select id="selectCompanyPublishInfoByParam" parameterClass="dynamicSqlParameter"
		resultMap="TbPublishInfo">
		select
		<include refid="columns" />
		from (select
		<include refid="columns" />
		from
		<include refid="table" />
		where ENDDATE >#equal.enddate:DECIMAL# and INFO_TYPE
		=#equal.infoType:VARCHAR# and ENT_ID =#equal.entId:VARCHAR# and
		INFO_STATUS= '1' and ENABLE_FLAG ='1'
		ORDER BY IS_SETTOP desc,CREATE_TIME desc) tt
		where ROWNUM &lt;= #rows#
	</select>

	<select id="selectPageForParamGrid" parameterClass="dynamicSqlParameter"
		resultMap="TbPublishInfoPage">
		select
		<include refid="columns_page" />
		FROM (SELECT BB.*,ROWNUM r FROM (SELECT * FROM
		<include refid="table" />
		<include refid="where_param_page" />
		) BB
		<dynamic prepend="WHERE">
			<isGreaterEqual prepend="" property="endNum"
				compareValue="0">
        <![CDATA[  ROWNUM <= #endNum#  ]]>
			</isGreaterEqual>
		</dynamic>
		) tt
		<dynamic prepend="WHERE">
			<isGreaterEqual prepend="AND" property="startNum"
				compareValue="0">
        <![CDATA[  tt.r > #startNum# ]]>
			</isGreaterEqual>
		</dynamic>
	</select>

	<select id="countparampage" resultClass="int" parameterClass="dynamicSqlParameter">
		SELECT COUNT(1) FROM
		<include refid="table" />
		<include refid="where_param_page" />
	</select>

	<select id="selectById" parameterClass="dynamicSqlParameter"
		resultMap="TbPublishInfo">
		select
		<include refid="columns" />
		from
		<include refid="table" />
		<include refid="where_param_id" />
	</select>

</sqlMap>