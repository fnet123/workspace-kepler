<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="RepairMaterials">
  <typeAlias alias="dynamicSqlParameter" type="com.ctfo.local.obj.DynamicSqlParameter" />
  <resultMap class="com.ctfo.analysis.beans.RepairMaterials" id="RepairMaterials">
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Mar 24 16:46:46 CST 2014.
    -->
    <result column="material_id" property="materialId" jdbcType="VARCHAR" />
    <result column="parts_code" property="partsCode" jdbcType="VARCHAR" />
    <result column="parts_name" property="partsName" jdbcType="VARCHAR" />
    <result column="parts_type" property="partsType" jdbcType="VARCHAR" />
    <result column="norms" property="norms" jdbcType="VARCHAR" />
    <result column="unit" property="unit" jdbcType="VARCHAR" />
    <result column="whether_imported" property="whetherImported" jdbcType="VARCHAR" />
    <result column="quantity" property="quantity" jdbcType="DECIMAL" />
    <result column="unit_price" property="unitPrice" jdbcType="DECIMAL" />
    <result column="sum_money" property="sumMoney" jdbcType="DECIMAL" />
    <result column="member_discount" property="memberDiscount" jdbcType="DECIMAL" />
    <result column="member_price" property="memberPrice" jdbcType="DECIMAL" />
    <result column="member_sum_money" property="memberSumMoney" jdbcType="DECIMAL" />
    <result column="drawn_no" property="drawnNo" jdbcType="VARCHAR" />
    <result column="vehicle_model" property="vehicleModel" jdbcType="VARCHAR" />
    <result column="vehicle_brand" property="vehicleBrand" jdbcType="VARCHAR" />
    <result column="three_warranty" property="threeWarranty" jdbcType="VARCHAR" />
    <result column="remarks" property="remarks" jdbcType="VARCHAR" />
    <result column="maintain_id" property="maintainId" jdbcType="VARCHAR" />
    <result column="enable_flag" property="enableFlag" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="columns">
	  material_id, parts_code, parts_name, parts_type, norms, unit, whether_imported, quantity,
      unit_price, sum_money, member_discount, member_price, member_sum_money, drawn_no,
      vehicle_model, vehicle_brand, three_warranty, remarks, maintain_id, enable_flag
  </sql>
  <sql id="table">
    tb_maintain_material_detail
  </sql>
  <sql id="where">
    WHERE 1=1
  </sql> 
  <sql id="where_param">
    <include refid="where" />
    <include refid="equal_WHERE" />
  </sql>
  <sql id="equal_WHERE">
    <isNotNull prepend="AND" property="equal.maintainId">
      maintain_id =  #equal.maintainId:VARCHAR#
    </isNotNull>
  </sql> 
  <select id="countParam" parameterClass="dynamicSqlParameter" resultClass="int">
    SELECT COUNT(1) FROM 
    <include refid="table" />
    <include refid="where_param" />
  </select>
  <select id="selectPageForParam" parameterClass="dynamicSqlParameter" resultMap="RepairMaterials">
	SELECT BB.* FROM 
    (SELECT 
	    <include refid="columns" /> 
	     FROM 
	    <include refid="table" />
	    <include refid="where_param" />
    ) BB
    LIMIT #startNum#,#pagesize#
  </select>
  
</sqlMap>